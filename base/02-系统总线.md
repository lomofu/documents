# 系统总线



## 2.1 什么是总线?

总线是连接各个不见得信息的传输线，是各个部件共享的传输介质



## 2.2 总线上信息的传送

- **串行** 一位一位的传

- **并行** 多位多位的传，传输距离较短

> 问题:现在高速信号传输使用串行还是并行？
>
> 高速信号的传输采用的是串行
> 原因 连接线大大减少，更易实现，成本低



## 2.3 总线分类

- **片内总线** 芯片内部的总线

- **系统总线** 计算机各个部件之间的信息传输线

  按照传输数据的不同分为三类：

  - **数据总线**

     双向 与机器字长、存储字长有关

  - **地址总线**

    - 由CPU单向发出 与存储地址、I/O地址有关

    - 寻址到字节，按字节编址

    - 按字寻址，一个字含多个字节

    - 地址总线宽度表明CPU寻址能力

  - **控制总线** 有出、有入

    主要用来传输 控制信号、时序信号
    常见的信号有：

    - CPU发出的，
    - 读/写信号、片选信号、中断响应信号 等
    - 反馈给CPU的，中断申请信号、复位信号、总线请求信号 等 

- **通信总线**

  用于计算机之间或计算机系统与其他系统（如控制仪表，移动通信）之间的通信



## 2.4 总线特性以及性能指标

### 总线物理实现

总线印刷在主板上，留出一些接口，其他部件通过接口连接到主板



### 总线特性

- **机械特性** 机械连接方面，尺寸，管脚数，排列顺序
- **电气特性** 传输方向和有效电平范围
- **功能特性** 每根传输线的功能（地址，数据，控制）
- **时间特性** 信号的时序关系



### 总性能指标

- **总线宽度** 数据线的根数

- **标准传输率** 每秒传输的最大字节数（MBps）

- **时钟同步/异步** 同步、不同步

- **总线复用** 地址线与数据线复用

  > 8086，20条地址线中16条数据线，减少芯片管脚数
  > 不同信号在同一条信号线上分时传输；通常是地址线与数据线复用

- **信号线数** 地址线、数据线、控制线的总和

- **总线控制方式** 突发、自动、仲裁、逻辑、计数

- **总线带宽**
  衡量总线本身所能达到最高传输速率的重要指标
  **总线带宽 = 总线时钟频率 × 总线宽度** (**/ 8**)
  时钟频率 = 1 / 时钟周期
  带宽，
  数字信号系统中，用来表示通信线路传送数据的能力(bps)



## 2.5 总线结构

### 单总线结构

![单总线结构框图](img/单总线结构框图.png)

严重影响 CPU 运行速度，延迟
总线争用 硬盘优于 CPU；总线成为发展瓶颈



### 面向CPU的双总线结构

![面向CPU的双总线结构框图](img/面向CPU的双总线结构框图.png)

一条 I/O 总线连接外设，一条 M 总线连接主存
CPU 执行仍会被打断



### 以存储器为中心的双总线结构

![以存储器为中心的双总线结构框图](img/以存储器为中心的双总线结构框图.png)

一条系统总线，一条存储总线，现在仍是分时工作的



### 双总线结构

![双总线结构](img/双总线结构.png)

通道：具有特殊功能的处理器，由通道对I/O统一管理

I/O总线和主存总线通过**通道**连接；



### 三总线结构

![三总线结构](img/三总线结构.png)



### 三总线结构又一形式

![三总线结构又一形式](img/三总线结构又一形式.png)

- **DMA总线** (连主存与**高速I/O**)；
- **局部总线** (连CPU与Cache)；
- **主存总线** (连CPU与主存)；
- **I/O总线** (连CPU与I/O)；
- **扩展总线** (通过扩展总线接口连扩展总线与系统总线/高速总线)；
- **系统总线** (连Cache/桥与主存)；



### 四总线结构